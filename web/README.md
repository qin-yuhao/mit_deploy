# 机器狗Web控制器

这是一个基于Web的机器狗控制界面，可以通过手机或电脑的浏览器来控制机器狗。

## 功能特点

- 🌐 **Web界面控制** - 通过浏览器控制，无需安装额外软件
- 📱 **手机友好** - 响应式设计，完美适配手机屏幕
- 🕹️ **虚拟摇杆** - 直观的触摸控制界面
- 🎛️ **实时控制** - 20Hz实时控制更新
- 🛡️ **安全机制** - 紧急停止按钮
- 📊 **状态显示** - 实时显示机器狗状态

## 安装和运行

### Windows系统：
1. 双击运行 `start_web_controller.bat`

### Linux系统：
1. 给脚本执行权限：`chmod +x start_web_controller.sh`
2. 运行脚本：`./start_web_controller.sh`

### 手动安装：
```bash
pip install Flask==2.3.3
python web_dog_controller.py
```

## 使用方法

1. **启动程序**
   - 运行启动脚本，程序会显示访问地址
   - 例如：`http://192.168.1.100:5000`

2. **手机访问**
   - 确保手机和机器狗在同一局域网
   - 用手机浏览器访问显示的网址

3. **控制界面**
   - **控制模式**：选择机器狗的工作模式
     - 被动：机器狗不执行任何动作
     - 趴下：机器狗趴下
     - 站立：机器狗站立
     - AI模式：使用强化学习模型控制
     - 软停止：平滑停止所有动作
   
   - **移动控制**：
     - 左侧摇杆：前后左右移动
     - 右侧摇杆：原地旋转
   
   - **高度控制**：拖动滑块调节机器狗高度 (0-0.4米)
   
   - **紧急停止**：立即停止所有动作

## 控制模式说明

| 模式 | 数值 | 说明 |
|------|------|------|
| 被动 | 0 | 机器狗处于被动状态，不执行动作 |
| 趴下 | 1 | 机器狗趴下 |
| 站立 | 2 | 机器狗站立 |
| AI模式 | 3 | 使用强化学习模型控制 |
| 软停止 | 4 | 平滑停止当前动作 |

## 技术细节

### 网络配置
- **目标地址**：127.0.0.1:5526 (本地UDP服务)
- **Web服务端口**：5000
- **更新频率**：20Hz (每50毫秒发送一次命令)

### 控制参数范围
- **线性速度**：-1.0 到 1.0 m/s
- **角速度**：-1.0 到 1.0 rad/s  
- **目标高度**：0.0 到 0.4 m

### UDP消息格式
```
struct.pack('=Bffff', mode, vx, vy, wz, target_height)
```

## 文件说明

- `web_dog_controller.py` - 主程序文件
- `templates/index.html` - Web界面模板
- `requirements.txt` - Python依赖包
- `start_web_controller.bat` - Windows启动脚本
- `start_web_controller.sh` - Linux启动脚本
- `README.md` - 本说明文档

## 故障排除

1. **无法访问Web界面**
   - 检查防火墙设置，确保5000端口开放
   - 确保设备在同一局域网内

2. **机器狗无响应**
   - 检查UDP目标地址是否正确 (127.0.0.1:5526)
   - 确认机器狗的UDP服务正在运行

3. **手机控制不灵敏**
   - 刷新浏览器页面
   - 检查网络连接质量

## 安全注意事项

- 使用前确保机器狗周围有足够空间
- 保持紧急停止按钮随时可用
- 在测试时使用较低的速度参数
- 确保网络连接稳定，避免控制延迟

## 与原始手柄控制的对比

| 功能 | 手柄控制 | Web控制 |
|------|----------|---------|
| 设备要求 | 需要物理手柄 | 只需浏览器 |
| 便携性 | 需携带手柄 | 手机即可 |
| 多人使用 | 一次一人 | 可多设备访问 |
| 调试方便性 | 需插拔设备 | 网页实时调试 |
| 稳定性 | 硬件连接稳定 | 依赖网络质量 |
